# Архитектура приложения "Cooking"

## Обзор архитектуры

Приложение "Cooking" реализовано по архитектуре **MVVM** (Model-View-ViewModel), одной из современных и рекомендуемых Google архитектур для построения Android-приложений. Эта архитектура обеспечивает четкое разделение бизнес-логики от пользовательского интерфейса, улучшая тестируемость, поддерживаемость и масштабируемость кода.

## Ключевые принципы MVVM

1. **Model (Модель)** - представляет данные и бизнес-логику приложения
2. **View (Представление)** - отвечает за отображение UI элементов и передачу пользовательских взаимодействий в ViewModel
3. **ViewModel (Модель представления)** - связующее звено между Model и View, которое преобразует данные из Model в формат, пригодный для отображения в View

## Структура проекта

Приложение использует следующую структуру пакетов:

```
com.example.cooking/
├── auth/         - Аутентификация пользователей (Firebase)
├── config/       - Конфигурационные файлы
├── data/         - Данные и модели
├── network/      - Сетевые сервисы и API
├── Recipe/       - Классы для работы с рецептами
├── ui/
│   ├── activities/  - Activity-классы
│   ├── adapters/    - Адаптеры для RecyclerView
│   ├── dialogs/     - Диалоговые окна
│   ├── fragments/   - Fragment-классы
│   └── viewmodels/  - ViewModel-классы
├── utils/        - Утилитарные классы
└── FireBase/     - Firebase-интеграция
```

## Компоненты MVVM в приложении

### Model

Модельный слой представлен:
- Классы в пакете `data.models` - описывают структуры данных
- Сервисы (например, `UserService`) - обеспечивают доступ к данным через API
- `FirebaseAuthManager` - управляет аутентификацией через Firebase
- `MySharedPreferences` - работа с локальным хранилищем

### View

Представления реализованы с помощью:
- Activities - основные экраны (`MainActivity`, и др.)
- Fragments - модульные компоненты UI (`HomeFragment`, `ProfileFragment`, `AuthFragment` и др.)
- Адаптеры - для рендеринга списков рецептов (`RecipesAdapter`)
- XML-разметки - описывают структуру UI

### ViewModel

ViewModel-классы связывают Model и View:
- `MainViewModel` - управляет общим состоянием приложения и навигацией
- `ProfileViewModel` - отвечает за логику экрана профиля
- `AuthViewModel` - управляет процессом аутентификации
- Другие ViewModel-классы для отдельных экранов

## Коммуникация между компонентами

1. **View -> ViewModel**: 
   - Представления подписываются на LiveData в ViewModel
   - Пользовательские действия передаются в методы ViewModel

2. **ViewModel -> Model**:
   - ViewModel запрашивает или изменяет данные через сервисы
   - ViewModel не содержит ссылок на View, что повышает тестируемость

3. **Model -> ViewModel**:
   - Model обновляет ViewModel через коллбэки или LiveData
   - Асинхронные операции выполняются в Model, результаты передаются в ViewModel

4. **ViewModel -> View**:
   - ViewModel обновляет LiveData, на которые подписано представление
   - View автоматически обновляется при изменении данных

## Жизненный цикл компонентов

Приложение использует компоненты Android Architecture Components:
- `ViewModel` - переживает изменения конфигурации
- `LiveData` - компонент для наблюдения за данными с учетом жизненного цикла
- Fragment Manager - управляет жизненным циклом фрагментов

## Преимущества используемой архитектуры

1. **Разделение ответственности** - каждый компонент имеет четко определенную роль
2. **Тестируемость** - бизнес-логика изолирована в ViewModel, что упрощает модульное тестирование
3. **Управление жизненным циклом** - LiveData автоматически учитывает жизненный цикл компонентов
4. **Обработка изменений конфигурации** - ViewModel сохраняет свое состояние при повороте экрана
5. **Масштабируемость** - четкое разделение позволяет нескольким разработчикам одновременно работать над разными компонентами 